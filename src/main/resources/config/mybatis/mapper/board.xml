<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="board">

	<select id="selectList" resultType="board">
		select * from board
	</select>
	
	<select id="selectList_index" resultType="board">
		select * from board order by idx desc limit 3
	</select>
	
	<select id="selectOne" resultType="board" parameterType="int">
		select * from board where idx=#{idx}
	</select>
	
	<insert id="insert" parameterType="board">
		insert into board (user_idx, title, content) values (#{user_idx}, #{title}, #{content})
	</insert>
	
	<!-- 게시글 삭제 부분 ( delete 타임만 추가 ) -->
	<update id="board_del_update" parameterType="board">
		 UPDATE board
		 SET deleted_at = current_timestamp()
		where idx=#{idx}
	</update>
	
	
		<!-- 조회수 증가 -->
	<update id="update_hit" parameterType="int">
		update board set hit = hit + 1
		where idx=#{idx}
	</update>
	
	<!-- 커뮤니티 목록보기 -->
	<select id="select_community_list" parameterType="board" resultType="board">
		select * from board
		
	</select>
	
	<!--  작성자 idx이용해서 idx값이아닌 이름나오게하기 -->
	<select id="select_community_list_name" parameterType="int" resultType="string">
		select user.name
		from board left outer join user
		on user.idx=#{board.idx} 
	</select>
	
</mapper>












